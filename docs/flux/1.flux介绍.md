---
sidebar_label: 1.flux介绍
sidebar_position: 1
title: 1.flux介绍
---

## 核心概念

这些是Flux中的一些核心概念。

### GitOps
GitOps是一种管理你的基础设施和应用的方式，使得整个系统被声明性地描述并进行版本控制（最有可能在一个Git仓库中），并有一个自动化的过程来确保部署的环境匹配仓库中指定的状态。

### Sources

源定义了包含系统所需状态的仓库的起源和获取它的要求（例如，凭证，版本选择器）。例如，来自SSH上的Git仓库的最新1.x标签。

源产生一个由其他Flux组件消费以执行操作的工件，例如将工件的内容应用到集群上。一个源可能被多个消费者共享以消除配置和/或存储的重复。

源的起源在定义的间隔上检查更改，如果有符合条件的更新版本可用，则生成新的工件。

所有的源都在Kubernetes集群中指定为自定义资源，源的例子包括GitRepository，OCIRepository，HelmRepository和Bucket资源。

### Reconciliation

Reconciliation是确保给定状态（例如，在集群中运行的应用程序，基础设施）匹配某处（例如，Git仓库）声明定义的所需状态。

Flux中有各种这些的例子：

- HelmRelease Reconciliation：确保Helm发布的状态与资源中定义的状态匹配，如果情况不是这样（包括HelmChart资源的修订版本更改），则执行发布。
- Bucket Reconciliation：在给定的间隔上下载并归档声明的bucket的内容，并将其存储为工件，记录工件的观察到的修订版本和工件本身在资源的状态中。
- Kustomization Reconciliation：确保在集群上部署的应用程序的状态与在Git或OCI仓库或S3 bucket中定义的资源匹配。

### Kustomization

Kustomization自定义资源代表了Flux应该在集群中进行对账的一组本地Kubernetes资源（例如，kustomize覆盖层）。默认情况下，对账每五分钟运行一次，但可以使用.spec.interval进行更改。如果你使用kubectl edit/patch/delete对集群进行任何更改，它们将立即被还原。你可以暂停reconciliation或将你的更改推送到Git仓库。

### Bootstrap

以GitOps方式安装Flux组件的过程被称为引导。应用程序清单被应用到集群，为Flux组件创建一个GitRepository和Kustomization，然后将清单推送到现有的Git仓库（或创建一个新的）。Flux可以像管理其他资源一样管理自己。引导是使用flux CLI或使用我们的Terraform提供者完成的。

### Continuous Delivery
续交付指的是频繁并可靠地交付软件更新的实践。

### Continuous Deployment
持续部署是一种实践，即一旦代码更改通过了自动化测试，就自动将其部署到生产环境。

### Progressive Delivery
渐进式交付通过向一部分用户逐步推出新功能或更新，建立在持续交付之上，使开发者能够在受控环境中测试和监控新功能，并在将其发布给所有人之前进行必要的调整。

开发者可以使用诸如功能标记、金丝雀发布和A/B测试之类的技术，来最大限度地减少引入可能会对用户造成伤害或中断业务操作的错误或错误的可能性。这些策略使新功能的控制和逐步推出成为可能，确保了平稳且成功的发布，增强了用户的信任并提高了整体用户体验。

Flux项目提供了一个名为Flagger的专门控制器，它实现了各种渐进式交付技术。有关更多信息，请查看Flagger部署策略。
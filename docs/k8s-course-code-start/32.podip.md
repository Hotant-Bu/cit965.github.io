---
sidebar_label: 32.podip
sidebar_position: 11
title: 32.podip
---

### PR #389
> Add PodIP to the info returned for a pod. [pod status中返回pod ip]

![](https://raw.githubusercontent.com/mouuii/picture/master/%E6%88%AA%E5%B1%8F2023-05-16%20%E4%B8%8B%E5%8D%883.14.01.png)
![](https://raw.githubusercontent.com/mouuii/picture/master/%E6%88%AA%E5%B1%8F2023-05-16%20%E4%B8%8B%E5%8D%883.14.31.png)


这段代码属于一个名为PodRegistryStorage的类型的方法，该方法用于填充一个Pod对象的信息。这个Pod对象是Kubernetes中的一个基本概念，它表示在一个节点（Node）上运行的一个或多个容器的集合，以及这些容器如何运行的一些共享资源。

这个fillPodInfo方法的具体操作如下：

- 检查PodRegistryStorage是否有一个非nil的podCache。如果没有，该方法将直接返回，不做任何事情。

- 如果有podCache，它会尝试使用pod的主机名（pod.CurrentState.Host）和ID（pod.ID）从缓存中获取Pod的信息。

- 如果在获取Pod信息时发生错误，它会记录一个错误消息并返回，不再进行后续操作。

- 如果成功获取到Pod信息，它会将这些信息存储在pod.CurrentState.Info中。

- 这个方法会尝试从Pod信息中获取名为"net"的容器信息，这通常是网络容器，它负责Pod的网络设置。如果找不到"net"容器信息，它会记录一个警告消息。

- 如果找到"net"容器信息，它会检查这个容器是否有网络设置（netContainerInfo.NetworkSettings）。如果没有，它会记录一个警告消息。

- 如果"net"容器有网络设置，它会将网络设置中的IP地址（netContainerInfo.NetworkSettings.IPAddress）存储在pod.CurrentState.PodIP中。

总的来说，这个方法的目的是从缓存中获取Pod的信息，并填充到Pod对象的CurrentState字段中，特别是Pod的网络信息。